

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. 智能合约开发详解 &mdash; xuperchain-doc  文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/stat.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="3. XuperChain RPC 接口使用说明" href="XuperRPC.html" />
    <link rel="prev" title="1. 智能合约SDK使用说明" href="XuperCDT.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> xuperchain-doc
          

          
          </a>

          
            
            
              <div class="version">
                3.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">XuperChain介绍:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction/brief.html">1. 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/modules.html">2. 模块</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/datastruct.html">3. 核心数据结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/smart_contracts.html">4. 智能合约</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/permission_system.html">5. 权限系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/privacy.html">6. 隐私和保密</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/perfomance.html">7. 性能</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/summary.html">8. 总结</a></li>
</ul>
<p class="caption"><span class="caption-text">快速入门</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">1. XuperChain环境部署</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html#basic-operation">2. XuperChain基本操作</a></li>
</ul>
<p class="caption"><span class="caption-text">技术设计文档:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/XuperModel.html">1. XuperModel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/XuperBridge.html">2. XuperBridge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/xvm.html">3. XVM虚拟机</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/permission_model.html">4. 账号权限控制模型</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/p2p.html">5. 超级链p2p网络</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/authentication.html">6. 身份认证</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/proposal.html">7. 提案和投票机制</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/crypto.html">8. 密码学和隐私保护</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/extension.html">9. 插件机制</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/consensus.html">10. 超级链共识框架</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/chained_bft.html">11. Chained-BFT共识公共组件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/xpos.html">12. XPoS共识</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/xpoa.html">13. XPoA共识</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/single_pow.html">14. Single及PoW共识</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/regulatory.html">15. 超级链监管机制</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/multidisk.html">16. 多盘散列</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/group.html">17. 平行链与群组</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_documents/cross_chain.html">18. 超级链跨链技术</a></li>
</ul>
<p class="caption"><span class="caption-text">进阶使用</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced_usage/contract_accounts.html">1. 合约账号</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_usage/multi-nodes.html">2. 多节点部署</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_usage/create_contracts.html">3. 创建合约</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_usage/initiate_proposals.html">4. 发起提案</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_usage/multi-disks.html">5. 配置变更</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_usage/parallel_chain.html">6. 使用平行链与群组</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_usage/subscribe.html">7. 使用事件订阅功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_usage/readonly_queries.html">8. 只读跨链场景使用文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_usage/cross_chain.html">9. 非事务场景跨链使用文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_usage/construct-XPoA.html">10. 搭建XPoA共识的超级链网络</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_usage/xchain-performance.html">11. xchain性能测试使用文档</a></li>
</ul>
<p class="caption"><span class="caption-text">开发应用</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developing_apps/eleccert.html">1. 电子存证合约</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing_apps/erc721.html">2. 数字资产交易</a></li>
</ul>
<p class="caption"><span class="caption-text">开发手册</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="XuperCDT.html">1. 智能合约SDK使用说明</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. 智能合约开发详解</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">2.1. 简介</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">2.2. 准备工作</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">2.2.1. 环境要求</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xuperchain">2.2.2. 下载编译xuperchain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">2.2.3. 设置环境变量</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">2.2.4. 启动xuperchain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">2.2.5. 创建合约账号</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">2.2.6. 小结</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id10">2.3. 快速体验</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id11">2.3.1. 创建合约工程</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">2.3.2. 编译合约</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13">2.3.3. 部署合约</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">2.3.4. 调用合约</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">2.3.5. 小结</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id16">2.4. 合约编写详解</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#c">2.4.1. C++合约</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id17">2.4.1.1. 合约样例</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id18">2.4.1.2. 代码解析</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#go">2.4.2. Go合约</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">2.4.2.1. 合约样例</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">2.4.2.2. 合约编译</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">2.4.2.3. 合约部署</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#java">2.4.3. Java合约</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id22">2.4.3.1. 编译环境准备</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id23">2.4.3.2. 合约样例</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id24">2.4.3.3. 合约编译</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id25">2.4.3.4. 合约部署</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id26">2.4.4. 小结</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id27">2.5. 合约单测</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vscode">2.6. VSCode编辑器集成</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#task">2.6.1. 配置编译和测试task</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id28">2.6.2. 编译合约</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id29">2.6.3. 跑合约单测</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id30">2.6.4. 代码补全</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id31">2.7. 开放网络集成环境</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id32">2.7.1. 账户注册</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id33">2.7.2. 创建合约账户</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id34">2.7.3. 合约开发和部署</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id35">2.7.4. 合约调用</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id36">2.8. 结语</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="XuperRPC.html">3. XuperChain RPC 接口使用说明</a></li>
</ul>
<p class="caption"><span class="caption-text">超级链测试环境</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../test_network/description.html">1. 超级链测试环境说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="../test_network/guides.html">2. 超级链测试环境使用指南</a></li>
</ul>
<p class="caption"><span class="caption-text">其他</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../operations_guides.html">1. 操作指导</a></li>
<li class="toctree-l1"><a class="reference internal" href="../video.html">2. 视频教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands_reference.html">3. 指令介绍(API)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQs.html">4. 常见问题解答</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vocabulary.html">5. 词汇表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lessons.html">6. 超级链小课堂</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">xuperchain-doc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>2. 智能合约开发详解</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/development_manuals/XdevManual.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>2. 智能合约开发详解<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<div class="section" id="id2">
<h2>2.1. 简介<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>百度超级链是一个支持多语言合约的区块链框架，有多种语言来供大家选择使用开发智能合约。目前超级链的智能合约可以使用c++ 、 go 以及 java语言来编写，c++ 和 go 支持 wasm合约，go 和 java支持native合约。c++ 合约合约性能会更好些，go 合约在易用性上更好，java 合约的开发者会更多些。大家可以根据需要选择自己喜欢的语言来编写智能合约，这篇文章会通过一步步的指引来帮助大家使用c++ 、go 或者 java 来编写超级链的智能合约，在阅读完文章后，希望大家对如何编写，部署和测试超级链的智能合约有初步的认识。</p>
<p>或使用超级链XuperOS，支持合约可视化管理、在线上链。 <a class="reference external" href="https://xchain.baidu.com/n/console#/xuperos/contracts?type=mine">点击了解</a></p>
</div>
<div class="section" id="id4">
<h2>2.2. 准备工作<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<div class="section" id="id5">
<h3>2.2.1. 环境要求<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h3>
<p>目前超级链节点主要运行在linux和mac上，windows不能运行超级链节点。</p>
<ol class="arabic simple">
<li>go &gt;= 1.12.x &amp;&amp; &lt;= 1.13.x</li>
<li>g++ &gt;= 4.8.2 或者 clang++ &gt;= 3.3</li>
<li>Docker</li>
</ol>
</div>
<div class="section" id="xuperchain">
<h3>2.2.2. 下载编译xuperchain<a class="headerlink" href="#xuperchain" title="永久链接至标题">¶</a></h3>
<p>智能合约只有部署到链上才能运行，因此我们首先要编译并启动xuperchain节点。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>如果需要使用特定分支，使用git checkout来切换特定分支，如 **git checkout v3.7**
</pre></div>
</div>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> <span class="nv">$HOME</span>
$ git clone https://github.com/xuperchain/xuperchain.git  xuperchain
$ <span class="nb">cd</span> xuperchain <span class="o">&amp;&amp;</span> make
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id6">
<h3>2.2.3. 设置环境变量<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h3>
<p>这些环境变量有助于我们更方便的执行一些命令而不用指定命令的全路径。</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$HOME</span>/xuperchain/output:<span class="nv">$PATH</span>
<span class="nb">export</span> <span class="nv">XDEV_ROOT</span><span class="o">=</span><span class="nv">$HOME</span>/xuperchain/core/contractsdk/cpp
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id7">
<h3>2.2.4. 启动xuperchain<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>–vm ixvm参数是选择ixvm合约虚拟机，开发合约过程中使用ixvm虚拟机能加快合约部署
</pre></div>
</div>
<hr class="docutils" />
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> output
<span class="c1">## 首先创建链</span>
$ ./xchain-cli createChain
<span class="c1">## 后台启动xuperchain节点</span>
$ nohup ./xchain --vm ixvm <span class="p">&amp;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id8">
<h3>2.2.5. 创建合约账号<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h3>
<p>合约账号用来进行合约管理，比如合约的权限控制等，要部署合约必须创建合约账号，同时合约账号里面需要有充足的xuper来部署合约。</p>
<p>创建合约账号XC1111111111111111&#64;xuper.</p>
<div class="highlight-go notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ ./xchain-cli account new --account 1111111111111111 --fee 2000
contract response:
        {
            &quot;pm&quot;: {
                &quot;rule&quot;: 1,
                &quot;acceptValue&quot;: 1.0
            },
            &quot;aksWeight&quot;: {
                &quot;dpzuVdosQrF2kmzumhVeFQZa1aYcdgFpN&quot;: 1.0
            }
        }
The gas you cousume is: 1000
The fee you pay is: 2000
Tx id: d62704970705a2682e2bd2c5b4f791065871fd45f64c87815b91d8a00039de35
account name: XC1111111111111111@xuper
</pre></div>
</td></tr></table></div>
<p>给合约账号转账</p>
<div class="highlight-go notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ ./xchain-cli transfer --to XC1111111111111111@xuper --amount 100000000
cd26657006f6f75f07bd53ad0a7fe74d76985cd592542d8cc87dc3fcdde115f5
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id9">
<h3>2.2.6. 小结<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h3>
<p>至此我们完成了所有的准备工作，包括编译xuperchain，创建链，启动节点，创建合约账号，后面我们开始体验怎么编译，部署和调用智能合约。</p>
</div>
</div>
<div class="section" id="id10">
<h2>2.3. 快速体验<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h2>
<p>在开始编写智能合约之前首先通过一个简单的例子来给大家演示合约是如何从代码到字节码，以及如何部署到链上，如何发起对智能合约的调用。
我们使用一个c++合约为例来展示如何编译、部署、调用合约。</p>
<div class="section" id="id11">
<h3>2.3.1. 创建合约工程<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>xdev工具是随xuperchain发布的一个合约编译和测试工具，在编译完xuperchain之后生成在output目录。
</pre></div>
</div>
<hr class="docutils" />
<p>xdev提供了一个默认的c++合约工程模板</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ xdev init hello-cpp
</pre></div>
</td></tr></table></div>
<p>这个命令创建了一个hello-cpp的合约工程</p>
</div>
<div class="section" id="id12">
<h3>2.3.2. 编译合约<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>第一次编译的时间会长一点，因为xdev需要下载编译器镜像，以及编译超级链的标准库。
</pre></div>
</div>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ xdev build -o hello.wasm
CC main.cc
LD wasm
</pre></div>
</td></tr></table></div>
<p>编译结果为hello.wasm，后面我们使用这个文件来部署合约</p>
</div>
<div class="section" id="id13">
<h3>2.3.3. 部署合约<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h3>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ ./xchain-cli wasm deploy --account XC1111111111111111@xuper --cname hello  --fee <span class="m">5200000</span> --runtime c ./hello-cpp/hello.wasm
contract response: initialize succeed
The gas you cousume is: <span class="m">151875</span>
The fee you pay is: <span class="m">5200000</span>
Tx id: 8c33a91c5cf564a28e7b62cad827ba91e19abf961702659dd8b70a3fb872bdf1
</pre></div>
</td></tr></table></div>
<p>此命令看起来很长，但是其中很多参数都有默认值，我们先来看一下参数的含义：</p>
<blockquote>
<div><ul class="simple">
<li><strong>wasm deploy</strong> ：此为部署wasm合约的命令参数，不做过多解释</li>
<li><strong>–account XC1111111111111111&#64;xuper</strong> ：此为部署wasm合约的账号（只有合约账号才能进行合约的部署）</li>
<li><strong>–cname hello</strong> ：这里的hello是指部署后在链上的合约名字，可以自行命名（但有规则，长度在4～16字符）</li>
<li><strong>–runtime c</strong> 指明我们部署的是一个c++代码编译的合约，如果是go合约这里填 <strong>go</strong> 即可。</li>
<li><strong>–fee</strong> 为我们部署这个合约所需要的xuper</li>
<li>最后的hello.wasm是合约编译好的文件</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id14">
<h3>2.3.4. 调用合约<a class="headerlink" href="#id14" title="永久链接至标题">¶</a></h3>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ ./xchain-cli wasm invoke --method hello --fee <span class="m">110000</span> hello
contract response: hello world
The gas you cousume is: <span class="m">35</span>
The fee you pay is: <span class="m">110000</span>
Tx id: d8989ad1bfd2d08bd233b7a09a544cb07976fdf3429144c42f6166d28e9ff695
</pre></div>
</td></tr></table></div>
<p>参数解释如下：</p>
<blockquote>
<div><ul class="simple">
<li><strong>wasm invoke</strong> 表示我们要调用一个合约</li>
<li><strong>–method hello</strong> 表示我们要调用合约的 <strong>hello</strong> 方法</li>
<li><strong>–fee</strong> 指明我们这次调用合约花费的xuper</li>
<li>最后的参数指明我们调用的合约名字 <strong>hello</strong></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id15">
<h3>2.3.5. 小结<a class="headerlink" href="#id15" title="永久链接至标题">¶</a></h3>
<p>通过本节的学习，我们快速掌握了如果编译，部署和调用合约，在下面的章节里面我们学些如果使用c++、go或者java语言来编写智能合约。</p>
</div>
</div>
<div class="section" id="id16">
<h2>2.4. 合约编写详解<a class="headerlink" href="#id16" title="永久链接至标题">¶</a></h2>
<p>XuperChain目前主要支持两种编译成wasm格式的合约语言， <strong>c++</strong> 和 <strong>go</strong>，以及 两种native合约 <strong>go</strong> 和 <strong>java</strong> ，合约框架的整体结构是一致的，在不同语言上的表现形式不太一样，但熟悉一种语言的SDK之后很容易迁移到其他语言。</p>
<p>下面大概说明如何编写这三种类型的合约</p>
<div class="section" id="c">
<h3>2.4.1. C++合约<a class="headerlink" href="#c" title="永久链接至标题">¶</a></h3>
<p>以counter合约为例来看如何编写一个C++合约。</p>
<div class="section" id="id17">
<h4>2.4.1.1. 合约样例<a class="headerlink" href="#id17" title="永久链接至标题">¶</a></h4>
<p>代码在 <strong>contractsdk/cpp/example/counter.cc</strong></p>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;xchain/xchain.h&quot;</span><span class="cp"></span>
<span class="k">struct</span> <span class="nl">Counter</span> <span class="p">:</span> <span class="k">public</span> <span class="n">xchain</span><span class="o">::</span><span class="n">Contract</span> <span class="p">{};</span>
<span class="n">DEFINE_METHOD</span><span class="p">(</span><span class="n">Counter</span><span class="p">,</span> <span class="n">initialize</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">xchain</span><span class="o">::</span><span class="n">Context</span><span class="o">*</span> <span class="n">ctx</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">context</span><span class="p">();</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">creator</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">arg</span><span class="p">(</span><span class="s">&quot;creator&quot;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">creator</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;missing creator&quot;</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">put_object</span><span class="p">(</span><span class="s">&quot;creator&quot;</span><span class="p">,</span> <span class="n">creator</span><span class="p">);</span>
    <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ok</span><span class="p">(</span><span class="s">&quot;initialize succeed&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">DEFINE_METHOD</span><span class="p">(</span><span class="n">Counter</span><span class="p">,</span> <span class="n">increase</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">xchain</span><span class="o">::</span><span class="n">Context</span><span class="o">*</span> <span class="n">ctx</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">context</span><span class="p">();</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">key</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">arg</span><span class="p">(</span><span class="s">&quot;key&quot;</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">value</span><span class="p">;</span>
    <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">get_object</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">cnt</span> <span class="o">=</span> <span class="n">atoi</span><span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
    <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
    <span class="n">snprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="n">cnt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">put_object</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>
    <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ok</span><span class="p">(</span><span class="n">buf</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">DEFINE_METHOD</span><span class="p">(</span><span class="n">Counter</span><span class="p">,</span> <span class="n">get</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">xchain</span><span class="o">::</span><span class="n">Context</span><span class="o">*</span> <span class="n">ctx</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">context</span><span class="p">();</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">key</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">arg</span><span class="p">(</span><span class="s">&quot;key&quot;</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">value</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">get_object</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ok</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;key not found&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id18">
<h4>2.4.1.2. 代码解析<a class="headerlink" href="#id18" title="永久链接至标题">¶</a></h4>
<p>下面我们逐行解析合约代码：</p>
<blockquote>
<div><ul class="simple">
<li><strong>#include &lt;xchain/xchain.h&gt;</strong> 为必须的，里面包含了编写合约所需要的库。</li>
<li><strong>struct Counter : public xchain::Contract {}</strong>: 声明了我们的合约类，所有的合约类都要继承自 <strong>xchain::Contract</strong> 。</li>
<li><strong>DEFINE_METHOD(Counter, initialize)</strong> 我们通过 <strong>DEFINE_METHOD</strong> 来为合约类定义合约方法，在这个例子里面我们为 <strong>Counter</strong> 类定义了一个叫 <strong>initialize</strong> 的合约方法。</li>
<li><strong>xchain::Context* ctx = self.context()</strong> :用来获取合约的上下文，每个合约都有一个对应的合约执行上下文，通过上下文我们可以获取合约参数，写入合约数据，context对象是我们经常要操作的一个对象。</li>
<li><strong>const std::string&amp; creator = ctx-&gt;arg(“creator”);</strong> ，用于从合约上下文里面获取合约方法的参数，这里我们获取了名字叫 <strong>creator</strong> 的合约参数，合约的参数列表是一个map结构, key为合约参数的名字，value为参数对应的用户传递的值。</li>
<li><strong>ctx-&gt;put_object(“creator”, creator);</strong> 通过合约上下文的 <strong>put_object</strong> 方法，我们可以向链上写入数据。</li>
<li><strong>ctx-&gt;ok(“initialize succeed”);</strong> 用于返回合约的执行结果，如果合约执行失败则调用 <strong>ctx-&gt;error</strong> 。</li>
</ul>
</div></blockquote>
<p>通过上面的代码分析我们得到了如下知识</p>
<ul class="simple">
<li>一个合约有多个方法组成，如counter合约的 <strong>initialize</strong> ， <strong>increase</strong> , <strong>get</strong> 方法。</li>
<li><strong>initialize</strong> 是每个合约必须实现的方法，这个合约方法会在部署合约的时候自动执行。</li>
<li>每个合约方法有一个 <strong>Context</strong> 对象，通过这个对象我们能获取到很多有用的方法，如获取用户参数等。</li>
<li>通过 <strong>Context</strong> 对象的 <strong>ok</strong> 或者 <strong>error</strong> 方法我们能给调用方反馈合约的执行情况:成功或者失败。</li>
</ul>
<p>更多的c++语言合约例子在超级链项目的 <strong>core/contractsdk/cpp/example</strong> 里面寻找。</p>
</div>
</div>
<div class="section" id="go">
<h3>2.4.2. Go合约<a class="headerlink" href="#go" title="永久链接至标题">¶</a></h3>
<p>以counter合约为例来看如何编写一个go合约。</p>
<div class="section" id="id19">
<h4>2.4.2.1. 合约样例<a class="headerlink" href="#id19" title="永久链接至标题">¶</a></h4>
<p>代码在 <strong>contractsdk/go/example/counter/counter.go</strong></p>
<div class="highlight-go notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nx">main</span>
<span class="kn">import</span> <span class="p">(</span>
    <span class="s">&quot;strconv&quot;</span>
    <span class="s">&quot;github.com/xuperchain/xuperchain/core/contractsdk/go/code&quot;</span>
    <span class="s">&quot;github.com/xuperchain/xuperchain/core/contractsdk/go/driver&quot;</span>
<span class="p">)</span>
<span class="kd">type</span> <span class="nx">counter</span> <span class="kd">struct</span><span class="p">{}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">counter</span><span class="p">)</span> <span class="nx">Initialize</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">code</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="nx">code</span><span class="p">.</span><span class="nx">Response</span> <span class="p">{</span>
    <span class="nx">creator</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Args</span><span class="p">()[</span><span class="s">&quot;creator&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="p">!</span><span class="nx">ok</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">code</span><span class="p">.</span><span class="nx">Errors</span><span class="p">(</span><span class="s">&quot;missing creator&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">PutObject</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&quot;creator&quot;</span><span class="p">),</span> <span class="nx">creator</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">code</span><span class="p">.</span><span class="nx">Error</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">code</span><span class="p">.</span><span class="nx">OK</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">counter</span><span class="p">)</span> <span class="nx">Increase</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">code</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="nx">code</span><span class="p">.</span><span class="nx">Response</span> <span class="p">{</span>
    <span class="nx">key</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Args</span><span class="p">()[</span><span class="s">&quot;key&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="p">!</span><span class="nx">ok</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">code</span><span class="p">.</span><span class="nx">Errors</span><span class="p">(</span><span class="s">&quot;missing key&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">value</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">GetObject</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
    <span class="nx">cnt</span> <span class="o">:=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="nx">cnt</span><span class="p">,</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nx">Atoi</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span>
    <span class="p">}</span>
    <span class="nx">cntstr</span> <span class="o">:=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nx">Itoa</span><span class="p">(</span><span class="nx">cnt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="nx">err</span> <span class="p">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">PutObject</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">cntstr</span><span class="p">))</span>
    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">code</span><span class="p">.</span><span class="nx">Error</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">code</span><span class="p">.</span><span class="nx">OK</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">cntstr</span><span class="p">))</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">counter</span><span class="p">)</span> <span class="nx">Get</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">code</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="nx">code</span><span class="p">.</span><span class="nx">Response</span> <span class="p">{</span>
    <span class="nx">key</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Args</span><span class="p">()[</span><span class="s">&quot;key&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="p">!</span><span class="nx">ok</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">code</span><span class="p">.</span><span class="nx">Errors</span><span class="p">(</span><span class="s">&quot;missing key&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">value</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">GetObject</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">code</span><span class="p">.</span><span class="nx">Error</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">code</span><span class="p">.</span><span class="nx">OK</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">driver</span><span class="p">.</span><span class="nx">Serve</span><span class="p">(</span><span class="nb">new</span><span class="p">(</span><span class="nx">counter</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>go合约的整体框架结构跟c++合约一样，在表现形式上稍微有点不一样：</p>
<ul class="simple">
<li>c++合约使用 <strong>DEFINE_METHOD</strong> 来定义合约方法，go通过结构体方法来定义合约方法。</li>
<li>c++通过 <strong>ctx-&gt;ok</strong> 来返回合约数据，go通过返回 <strong>code.Response</strong> 对象来返回合约数据。</li>
<li>go合约需要在main函数里面调用 <strong>driver.Serve</strong> 来启动合约。</li>
</ul>
<p>更多的go语言合约例子在超级链项目的 <strong>core/contractsdk/go/example</strong> 里面寻找。</p>
</div>
<div class="section" id="id20">
<h4>2.4.2.2. 合约编译<a class="headerlink" href="#id20" title="永久链接至标题">¶</a></h4>
<p>Go合约使用如下命令来编译合约</p>
<div class="highlight-go notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nx">GOOS</span><span class="p">=</span><span class="nx">js</span> <span class="nx">GOARCH</span><span class="p">=</span><span class="nx">wasm</span> <span class="k">go</span> <span class="nx">build</span> <span class="o">-</span><span class="nx">o</span> <span class="nx">hello</span><span class="p">.</span><span class="nx">wasm</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id21">
<h4>2.4.2.3. 合约部署<a class="headerlink" href="#id21" title="永久链接至标题">¶</a></h4>
<p>Go合约部署唯一跟c++合约不一样的地方在于 <strong>–runtime</strong> 参数，完整命令如下</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ ./xchain-cli wasm deploy --account XC1111111111111111@xuper --cname hello  --fee <span class="m">5200000</span> --runtime go ./hello-go/hello.wasm
</pre></div>
</td></tr></table></div>
<p>Go合约的调用跟c++合约参数一致。</p>
</div>
</div>
<div class="section" id="java">
<h3>2.4.3. Java合约<a class="headerlink" href="#java" title="永久链接至标题">¶</a></h3>
<p>java合约目前只支持native合约。</p>
<p>如果本地搭建超级链环境，在部署、调用native合约之前，请先查看`conf/xchain.yaml` 中native一节，确保native合约功能开启。</p>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># 管理native合约的配置</span>
<span class="nt">native</span><span class="p">:</span>
    <span class="nt">enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</td></tr></table></div>
<p>以counter合约为例来看如何编写一个java合约。</p>
<div class="section" id="id22">
<h4>2.4.3.1. 编译环境准备<a class="headerlink" href="#id22" title="永久链接至标题">¶</a></h4>
<p>编译Java sdk：Java版本不低于Java1.8版本</p>
<p>包管理器：maven，mvn版本3.6+</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 编译java sdk</span>
<span class="nb">cd</span> contractsdk/java
mvn install -f pom.xml
<span class="c1"># 产出二进制文件target/java-contract-sdk-0.1.0.jar，并自动安装到mvn本地仓库下</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="id23">
<h4>2.4.3.2. 合约样例<a class="headerlink" href="#id23" title="永久链接至标题">¶</a></h4>
<p>代码在 <strong>contractsdk/java/example/counter/src/main/java/com/baidu/xuper/example/Counter.java</strong></p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.baidu.xuper.example</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.math.BigInteger</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.baidu.xuper.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.baidu.xuper.Contract</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.baidu.xuper.ContractMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.baidu.xuper.Driver</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.baidu.xuper.Response</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm">* Counter</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Counter</span> <span class="kd">implements</span> <span class="n">Contract</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="nd">@ContractMethod</span>
    <span class="kd">public</span> <span class="n">Response</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">Context</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="s">&quot;ok&quot;</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@ContractMethod</span>
    <span class="kd">public</span> <span class="n">Response</span> <span class="nf">increase</span><span class="o">(</span><span class="n">Context</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">key</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">args</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;key&quot;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">key</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">&quot;missing key&quot;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">BigInteger</span> <span class="n">counter</span><span class="o">;</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">value</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getObject</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">counter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">ctx</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">&quot;key &quot;</span> <span class="o">+</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">key</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; not found, initialize to zero&quot;</span><span class="o">);</span>
            <span class="n">counter</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">ctx</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">&quot;get value &quot;</span> <span class="o">+</span> <span class="n">counter</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
        <span class="n">ctx</span><span class="o">.</span><span class="na">putObject</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">counter</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">());</span>

        <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="n">counter</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">getBytes</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@ContractMethod</span>
    <span class="kd">public</span> <span class="n">Response</span> <span class="nf">get</span><span class="o">(</span><span class="n">Context</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">key</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">args</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;key&quot;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">key</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">&quot;missing key&quot;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">BigInteger</span> <span class="n">counter</span><span class="o">;</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">value</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getObject</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">counter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">&quot;key &quot;</span> <span class="o">+</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">key</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; not found)&quot;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">ctx</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">&quot;get value &quot;</span> <span class="o">+</span> <span class="n">counter</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="n">counter</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">getBytes</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Driver</span><span class="o">.</span><span class="na">serve</span><span class="o">(</span><span class="k">new</span> <span class="n">Counter</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>java合约的整体框架结构跟c++、go合约一样，在表现形式上稍微有点不一样：</p>
<ul class="simple">
<li>c++合约使用 <strong>DEFINE_METHOD</strong> 来定义合约方法，go通过结构体方法来定义合约方法，java通过定义class类方法来定义合约。</li>
<li>c++通过 <strong>ctx-&gt;ok</strong> 来返回合约数据，go通过返回 <strong>code.Response</strong> 对象来返回合约数据，java通过 <strong>Response.ok</strong> 来返回合约数据。</li>
<li>java合约需要在main函数里面调用 <strong>Driver.serve</strong> 来启动合约。</li>
</ul>
<p>更多的java语言合约例子在超级链项目的 <strong>core/contractsdk/java/example</strong> 里面寻找。</p>
</div>
<div class="section" id="id24">
<h4>2.4.3.3. 合约编译<a class="headerlink" href="#id24" title="永久链接至标题">¶</a></h4>
<p>java合约使用如下命令来编译合约</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> contractsdk/java/example/counter
mvn package -f pom.xml
<span class="c1"># 产出二进制文件target/counter-0.1.0-jar-with-dependencies.jar，用于合约部署</span>
</pre></div>
</div>
</div>
<div class="section" id="id25">
<h4>2.4.3.4. 合约部署<a class="headerlink" href="#id25" title="永久链接至标题">¶</a></h4>
<p>native合约和wasm合约在合约部署和合约执行上通过 <strong>native</strong> 和 <strong>wasm</strong> 字段进行区分。</p>
<p>不同语言的合约通过 <strong>–runtime</strong> 参数进行指定，完整命令如下。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 部署golang native合约</span>
./xchain-cli native deploy --account XC1111111111111111@xuper --fee <span class="m">15587517</span> --runtime java counter-0.1.0-jar-with-dependencies.jar --cname javacounter
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">--runtime</span> <span class="pre">c</span></code> ：表示部署的是c++合约</li>
<li><code class="docutils literal notranslate"><span class="pre">--runtime</span> <span class="pre">go</span></code> ：表示部署的是golang合约</li>
<li><code class="docutils literal notranslate"><span class="pre">--runtime</span> <span class="pre">java</span></code>：表示部署的是java合约</li>
</ul>
<p>java合约的调用跟c++、go合约参数一致。</p>
</div>
</div>
<div class="section" id="id26">
<h3>2.4.4. 小结<a class="headerlink" href="#id26" title="永久链接至标题">¶</a></h3>
<p>在这个章节里面我们学习了如何使用c++、go和java语言来编写合约，更多的合约例子可以在对应语言SDK的example目录里面寻找，在下一章节我们学习如果给合约编写单元测试。</p>
</div>
</div>
<div class="section" id="id27">
<h2>2.5. 合约单测<a class="headerlink" href="#id27" title="永久链接至标题">¶</a></h2>
<p>如果每次测试合约都需要部署到链上再发起调用会特别麻烦，xdev工具提供了单测能力，可以脱离链上环境运行合约。</p>
<p>test目录下放着合约测试文件，文件以 .test.js结尾，可以有多个测试文件。
以hello-cpp目录下的test/hello.test.js为例，文件内容如下:</p>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">assert</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s">&quot;assert&quot;</span><span class="p">);</span>
<span class="n">Test</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">,</span> <span class="n">function</span> <span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">var</span> <span class="n">contract</span><span class="p">;</span>
    <span class="n">t</span><span class="p">.</span><span class="n">Run</span><span class="p">(</span><span class="s">&quot;deploy&quot;</span><span class="p">,</span> <span class="n">function</span> <span class="p">(</span><span class="n">tt</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">contract</span> <span class="o">=</span> <span class="n">xchain</span><span class="p">.</span><span class="n">Deploy</span><span class="p">({</span>
            <span class="nl">name</span><span class="p">:</span> <span class="s">&quot;hello&quot;</span><span class="p">,</span>
            <span class="nl">code</span><span class="p">:</span> <span class="s">&quot;../hello.wasm&quot;</span><span class="p">,</span>
            <span class="nl">lang</span><span class="p">:</span> <span class="s">&quot;c&quot;</span><span class="p">,</span>
            <span class="nl">init_args</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">})</span>
    <span class="p">});</span>
    <span class="n">t</span><span class="p">.</span><span class="n">Run</span><span class="p">(</span><span class="s">&quot;invoke&quot;</span><span class="p">,</span> <span class="n">function</span> <span class="p">(</span><span class="n">tt</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">contract</span><span class="p">.</span><span class="n">Invoke</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">,</span> <span class="p">{});</span>
        <span class="n">assert</span><span class="p">.</span><span class="n">equal</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">Body</span><span class="p">,</span> <span class="s">&quot;hello world&quot;</span><span class="p">);</span>
    <span class="p">})</span>
<span class="p">})</span>
</pre></div>
</td></tr></table></div>
<p>使用Test函数来定义测试case，hello为测试名字, 匿名js function作为测试的body。
全局对象xchain是我们跟xchain环境打交道的入口，xchain.Deploy用来部署一个合约到xchain环境，返回的contract对象，调用contract.Invoke方法即可调用合约。
Deploy和Invoke方法都是通过抛出异常的方式来处理错误，测试框架会自动捕获错误来结束测试case。t.Run可以定义子测试case。</p>
<p>使用如下命令来启动测试</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> hello-cpp
$ xdev <span class="nb">test</span> <span class="c1"># 测试test目录下的所有case</span>
<span class="o">===</span> RUN   <span class="nv">hello</span>
<span class="o">===</span> RUN   hello/deploy
<span class="o">===</span> RUN   hello/invoke
--- PASS: hello <span class="o">(</span><span class="m">0</span>.11s<span class="o">)</span>
    --- PASS: hello/deploy <span class="o">(</span><span class="m">0</span>.07s<span class="o">)</span>
    --- PASS: hello/invoke <span class="o">(</span><span class="m">0</span>.02s<span class="o">)</span>
PASS
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="vscode">
<h2>2.6. VSCode编辑器集成<a class="headerlink" href="#vscode" title="永久链接至标题">¶</a></h2>
<div class="section" id="task">
<h3>2.6.1. 配置编译和测试task<a class="headerlink" href="#task" title="永久链接至标题">¶</a></h3>
<p>为了方便在vscode里面编译和测试合约，在 <strong>.vscode/tasks.json</strong> 里面添加如下内容</p>
<div class="highlight-json notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span>{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    &quot;version&quot;: &quot;2.0.0&quot;,
    &quot;tasks&quot;: [
        {
            &quot;label&quot;: &quot;xdev build&quot;,
            &quot;type&quot;: &quot;shell&quot;,
            &quot;command&quot;: &quot;xdev build -p&quot;,
            &quot;options&quot;: {
                &quot;cwd&quot;: &quot;${workspaceFolder}&quot;
            },
            &quot;group&quot;: {
                &quot;kind&quot;: &quot;build&quot;,
                &quot;isDefault&quot;: true
            }
        },
        {
            &quot;label&quot;: &quot;xdev test&quot;,
            &quot;type&quot;: &quot;shell&quot;,
            &quot;command&quot;: &quot;xdev test&quot;,
            &quot;options&quot;: {
                &quot;cwd&quot;: &quot;${workspaceFolder}&quot;
            }
        }
    ]
}
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id28">
<h3>2.6.2. 编译合约<a class="headerlink" href="#id28" title="永久链接至标题">¶</a></h3>
<p>Run Build Task(⇧⌘B)来启动构建</p>
<img alt="../_images/xdev-build1.gif" class="align-center" src="../_images/xdev-build1.gif" />
</div>
<div class="section" id="id29">
<h3>2.6.3. 跑合约单测<a class="headerlink" href="#id29" title="永久链接至标题">¶</a></h3>
<p>调用Run Task命令之后，选择xdev test来触发单元测试</p>
<img alt="../_images/xdev-test.gif" class="align-center" src="../_images/xdev-test.gif" />
</div>
<div class="section" id="id30">
<h3>2.6.4. 代码补全<a class="headerlink" href="#id30" title="永久链接至标题">¶</a></h3>
<p>为了让vscode帮我们自动补全代码，需要做如下配置，在项目的.vscode/settings.json文件里面加上这一个配置</p>
<div class="highlight-go notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s">&quot;C_Cpp.default.compileCommands&quot;</span><span class="p">:</span> <span class="s">&quot;${workspaceFolder}/compile_commands.json&quot;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>之后就能用vscode的自动补全功能了.</p>
</div>
</div>
<div class="section" id="id31">
<h2>2.7. 开放网络集成环境<a class="headerlink" href="#id31" title="永久链接至标题">¶</a></h2>
<p>超级链开放网络是基于百度自研底层技术搭建的区块链基础服务网络，符合中国标准，超级节点遍布全国，区块链网络完全开放，为用户提供区块链快速部署和运行的环境，最低2元钱就用上的区块链服务，让信任链接更加便利。</p>
<p>超级链开放网络为开发者提供了合约开发、编译、部署、管理的一站式可视化集成环境，下面介绍如何在开放网络上开发部署智能合约。</p>
<img alt="../_images/xuperos-dashboard.png" class="align-center" src="../_images/xuperos-dashboard.png" />
<div class="section" id="id32">
<h3>2.7.1. 账户注册<a class="headerlink" href="#id32" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><ol class="arabic simple">
<li>在超级链官网 <a class="reference external" href="https://xchain.baidu.com/">https://xchain.baidu.com/</a> 使用百度账号登录，如果没有百度账号请先注册。</li>
<li>进入超级链开放网络控制台，第一次登录的用户，平台会为用户创建区块链账户，请按照创建账户指引文档完成安全码设置，并记录自己的助记词和私钥。</li>
</ol>
</div></blockquote>
<img alt="../_images/xuperos-create-account.png" class="align-center" src="../_images/xuperos-create-account.png" />
</div>
<div class="section" id="id33">
<h3>2.7.2. 创建合约账户<a class="headerlink" href="#id33" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><ol class="arabic simple">
<li>在工作台，选择「开放网络 —&gt; 合约管理」，点击「创建合约账户」</li>
<li>进入创建合约账户页，输入安全码后点击「确认创建」，系统自动生成账户名称后，即创建完毕</li>
</ol>
</div></blockquote>
<img alt="../_images/xuperos-no-account.png" class="align-center" src="../_images/xuperos-no-account.png" />
</div>
<div class="section" id="id34">
<h3>2.7.3. 合约开发和部署<a class="headerlink" href="#id34" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><ol class="arabic simple">
<li>在工作台，选择「开放网络 —&gt; 合约管理」，点击「创建智能合约」</li>
<li>进入新页面，按要求填写基本信息、编辑合约代码，编译成功后点击「安装」，即可进入合约安装(部署)流程。 合约代码编译有两种方式：<ul>
<li>模板合约；选择模板后，只需在模板代码中填写相关参数即可（参考模板详情完成参数填写）</li>
<li>自定义合约；在编辑器内完成C++语言的合约编辑即可</li>
</ul>
</li>
</ol>
</div></blockquote>
<img alt="../_images/xuperos-create-contract.png" class="align-center" src="../_images/xuperos-create-contract.png" />
<ol class="arabic" start="3">
<li><p class="first">进入安装流程，用户需按合约代码完成预执行操作。点击「开始验证」，执行通过会进入安装确认页</p>
<blockquote>
<div><ul class="simple">
<li>模板合约；系统会提供模板的函数，只需填写参数即可（可参考模板详情）</li>
<li>自定义合约；根据页面操作说明，完成函数、参数填写</li>
</ul>
</div></blockquote>
</li>
</ol>
<img alt="../_images/xuperos-install-contract.png" class="align-center" src="../_images/xuperos-install-contract.png" />
<ol class="arabic simple" start="4">
<li>进入确认安装页，页面显示安装合约预计消耗的余额。点击「安装合约」将合约上链，上链过程需要等待10S左右。安装完成后，在合约管理列表中可看到合约状态变更为‘安装成功’，即该合约已完成安装。</li>
</ol>
</div>
<div class="section" id="id35">
<h3>2.7.4. 合约调用<a class="headerlink" href="#id35" title="永久链接至标题">¶</a></h3>
<p>目前开放网络支持通过Go和Javascript两种SDK调用智能合约。</p>
<blockquote>
<div><ul class="simple">
<li>Go SDK：<a class="reference external" href="https://github.com/xuperchain/xuper-java-sdk">https://github.com/xuperchain/xuper-java-sdk</a></li>
<li>Javascript SDK：<a class="reference external" href="https://github.com/xuperchain/xuper-sdk-js">https://github.com/xuperchain/xuper-sdk-js</a></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id36">
<h2>2.8. 结语<a class="headerlink" href="#id36" title="永久链接至标题">¶</a></h2>
<p>通过上面的学习，相信大家已经掌握了如何编写超级链智能合约的方法，想要更深入了解超级链，可以通过访问超级链开源项目 <a class="reference external" href="https://github.com/xuperchain/xuperchain">https://github.com/xuperchain/xuperchain</a> 来获取更多的学习资料。</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="XuperRPC.html" class="btn btn-neutral float-right" title="3. XuperChain RPC 接口使用说明" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="XuperCDT.html" class="btn btn-neutral float-left" title="1. 智能合约SDK使用说明" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, xuper

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>